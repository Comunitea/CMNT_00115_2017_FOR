<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="variants" name="Variants Forestal Template" inherit_id="website_sale.variants">

        <!--Show single variants in product details-->
        <xpath expr="//li[last()]" position="before">
            <p t-if="len(variant_id.value_ids) == 1">
                <strong t-esc="variant_id.attribute_id.name"/>:
                <span t-esc="variant_id.value_ids[0].name"/>
            </p>
        </xpath>

        <!-- Add set custom length to variants in select options-->
        <xpath expr="//option" position="replace">
            <t t-if="value_id.name == 'Personalizado'">
                <option t-att-value="value_id.id" name="custom_option">
                    <span>Establecer largo</span>
                </option>
            </t>
            <t t-else="">
                <option t-att-value="value_id.id">
                    <span t-field="value_id.name"/>
                    <span t-if="value_id.price_extra">
                        <t t-esc="value_id.price_extra > 0 and '+' or ''"/><span t-field="value_id.price_extra" style="white-space: nowrap;" t-options='{
                                   "widget": "monetary",
                                    "from_currency": product.currency_id,
                                   "display_currency": website.currency_id
                               }'/>
                    </span>
                </option>
            </t>
        </xpath>

        <!-- Add set custom length input for select options-->

        <xpath expr="//select" position="after">
            <t t-foreach="variant_id.value_ids" t-as="value_id">
                <t t-if="value_id.name == 'Personalizado'">
                    <input type="number" min="0" max="600" step="5" class="hidden form-control" name="custom_length" t-att-id="custom_length" t-att-value="0" placeholder="Establecer largo"/>
                </t>
            </t>
        </xpath>

        <!-- Add set custom length to variants in radio options-->
        <xpath expr="//li[@class='form-group js_attribute_value']" position="replace">
            <li class="form-group js_attribute_value" style="margin: 0;">
                <label class="control-label" style="margin: 0 20px;">
                    <t t-if="value_id.name == 'Personalizado'">
                        <input type="radio" t-att-class="'js_variant_change' if variant_id.attribute_id.create_variant else None"
                               t-att-checked="'checked' if not inc else None"
                               t-att-name="'attribute-%s-%s' % (product.id, variant_id.attribute_id.id)"
                               t-att-value="value_id.id" style="vertical-align: top; margin-right: 10px;"/>
                        <span>Largo personalizado</span>
                        <input type="number" min="0" max="600" step="5" class="hidden form-control" name="custom_length" t-att-id="custom_length" t-att-value="0" placeholder="Establecer largo"/>
                    </t>
                    <t t-else="">
                        <input type="radio" t-att-class="'js_variant_change' if variant_id.attribute_id.create_variant else None"
                               t-att-checked="'checked' if not inc else None"
                               t-att-name="'attribute-%s-%s' % (product.id, variant_id.attribute_id.id)"
                               t-att-value="value_id.id" style="vertical-align: top; margin-right: 10px;"/>
                        <span t-field="value_id.name"/>
                        <span class="badge" t-if="value_id.price_extra">
                            <t t-esc="value_id.price_extra > 0 and '+' or ''"/>
                            <span t-field="value_id.price_extra" style="white-space: nowrap;"
                                  t-options='{"widget": "monetary",
                                  "from_currency": product.currency_id,
                                  "display_currency": website.currency_id}'/>
                            </span>
                    </t>
                </label>
            </li>
        </xpath>

    </template>

</odoo>